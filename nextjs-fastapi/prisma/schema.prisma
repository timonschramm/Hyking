generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider  = "postgresql"
    url       = env("DATABASE_URL")
    directUrl = env("DIRECT_URL")
}

model Activity {
    id                      Int      @id @default(autoincrement())
    title                   String
    teaserText              String
    descriptionShort        String
    descriptionLong         String
    categoryId              Int
    difficulty              Int
    landscapeRating         Int
    experienceRating        Int
    staminaRating           Int
    length                  Float
    ascent                  Float
    descent                 Float
    durationMin             Float
    minAltitude             Float
    maxAltitude             Float
    pointLat                Float
    pointLon                Float
    isWinter                Boolean
    isClosed                Boolean
    primaryRegion           String
    primaryImageId          String
    publicTransportFriendly Boolean
    category                Category @relation(fields: [categoryId], references: [id])
    seasons                 Season[]
    images                  Image[]
}

model Category {
    id         Int        @id @default(autoincrement())
    name       String
    activities Activity[]
}

enum Month {
    jan
    feb
    mar
    apr
    may
    jun
    jul
    aug
    sep
    oct
    nov
    dec
}

model Season {
    id         Int      @id @default(autoincrement())
    activityId Int
    month      String
    isActive   Boolean
    activity   Activity @relation(fields: [activityId], references: [id])
}

model Image {
    id         Int      @id @default(autoincrement())
    activityId Int
    imageId    String
    activity   Activity @relation(fields: [activityId], references: [id])
}

model Profile {
    id                String   @id @default(cuid())
    email             String
    age               Int?
    imageUrl          String?
    gender            String?
    location          String?
    experienceLevel   Int?
    preferredPace     Int?
    preferredDistance Int?
    hobbies           String[]
    dogFriendly       Boolean?
    transportation    Int?
    spotifyConnected  Boolean  @default(false)
    spotifyAccessToken  String?
    spotifyRefreshToken String?
    spotifyTokenExpiry  DateTime?
    artists           Artist[] @relation("ProfileArtists")
    onboardingCompleted Boolean @default(false)
}

model Artist {
    id        Int      @id @default(autoincrement())
    spotifyId String   @unique
    name      String
    imageUrl  String
    genres    Genre[]  @relation("ArtistGenres")
    hidden    Boolean  @default(false)
    profiles  Profile[] @relation("ProfileArtists")
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model Genre {
    id      String   @id @default(uuid())
    name    String
    artists Artist[] @relation("ArtistGenres")
}
